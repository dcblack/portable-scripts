#!/bin/bash
#
# This script does the following:
#
# 1. Clones the portable-scripts if they are not present in the $SOURCE_DIR directory.
# 2. Updates the portable-scripts
# 3. Inserts a symbolic link $TARGET_DIR referencing portable-scripts/.local
#
# WARNING: This will create portable-scripts/ in your $HOME directory.

# Where to install
SOURCE_DIR="${HOME}"
TARGET_DIR="${HOME}/.local"
export INSTALL_DIR

# shellcheck disable=SC2164
pushd "${SOURCE_DIR}"

# Get portable-scripts if necessary
if [[ -d portable-scripts ]]; then
  # shellcheck disable=SC2164
  pushd portable-scripts
  git pull
  # shellcheck disable=SC2164
  popd
else
  git clone https://github.com/dcblack/portable-scripts.git
fi
if [[ -L .local ]]; then
  echo "Leaving existing .local in place"
else
  ln -s "${SOURCE_DIR}/portable-scripts/.local" "${TARGET_DIR}"
fi

# shellcheck disable=SC2164
popd

# vim:nospell
